---
title: IBMi LAGG
pubDate: '2023-02-26'
tags: ['datacenter', 'ibmi']
draft: false
description: Creating LAGG for performance and redundancy on the IBMi
heroImage: /static/images/lagg-ports.png
---

## What and Why?

Link Aggregation (LAGG) combines multiple physical interfaces into a single logical interface. This configuration offers two key benefits:

1.  **Redundancy:** By connecting a single IBM server to multiple switches, you minimize downtime. If one switch fails, the other maintains the connection.
2.  **Performance:** When both switches are operational, traffic uses all available network cables, increasing throughput.

## How?

Configuration varies by switch manufacturer (e.g., Cisco Nexus uses Virtual Port Channels, or VPCs). On IBM i, follow these steps:

1.  **Identify Interfaces:** Determine which physical interfaces to aggregate. Typically, a 4-port network adapter uses labels like `CMN03`â€“`CMN06`. Verify this with the command `WRKHDWRSC *CMN`.

![ibmi-lagg-interfaces](/static/images/lagg-ports.png)

2.  **Create Line Descriptor:** Use the `WRKLIND` screen and press F6 (or use the `CRTLIND` command) to create a new line descriptor.

![ibmi-lagg-wrklind](/static/images/lagg-wrklind.png)

3.  **Configure Resource Name:** Instead of a specific port (e.g., `CMN04`), specify `*AGG` as the resource name.

4.  **Set Aggregate Policy:** Match this to your switch configuration.
    - For Cisco switches using LACP, select `*LNKAGG` on IBM i.
    - For standard EtherChannel, use `*ETHCHL`.

5.  **Set Policy Type:** `*SRCDESTP` is the standard and most common setting.

6.  **Define Aggregated Resources:** List the physical interfaces to be included in the LAGG group.

![ibmi-lagg-configure](/static/images/lagg-configure-line.png)

Once configured, the new line descriptor functions like any other. You can assign static IP addresses and routing as usual, but with the added benefits of performance and redundancy.
