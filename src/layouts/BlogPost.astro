---
import { type CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import BaseHead from "@/components/BaseHead.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import FormattedDate from "@/components/FormattedDate.astro";
import { FaArrowLeft, FaCalendar } from "react-icons/fa6";
import BlockAuthor from "../components/BlockAuthor.astro";
import BlockPostTags from "../components/BlockPostTags.astro";
import Backdrop from "@/components/Backdrop.astro";
import Aurora from "../components/Aurora.astro";

type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, updatedDate, heroImage, tags } =
  Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
  </head>

  <body class="bg-background text-foreground antialiased">
    <Backdrop />
    <Header />
    <main class="container">
      <article>
        <div>
          <div>
            <div class="inline-flex">
              <div class="mb-12">
                <Aurora>
                  <h1 class="lg:leading-loose text-4xl lg:text-6xl font-bold">
                    {title}
                  </h1>
                </Aurora>
                <div>
                  {
                    pubDate && (
                      <div class="gap-2 items-center rounded inline-flex bg-violet-100 dark:bg-violet-900 text-violet-900 dark:text-violet-200 mb-2 py-1 px-2 text-shadow">
                        <FaCalendar />
                        <FormattedDate date={pubDate} />
                      </div>
                    )
                  }
                  {
                    updatedDate && (
                      <div class="last-updated-on">
                        Last updated on <FormattedDate date={updatedDate} />
                      </div>
                    )
                  }
                </div>
              </div>
            </div>
          </div>
          <div class="grid lg:grid-cols-3 xl:grid-cols-5 gap-16">
            <section
              class="lg:col-span-2 xl:col-span-4 prose text-foregound overflow-x-auto overflow-y-hidden"
            >
              <div
                class:list={[
                  "hero-image",
                  { hidden: !heroImage, "mb-16": heroImage },
                ]}
              >
                {
                  heroImage && (
                    <Image
                      class="w-full h-auto"
                      src={heroImage}
                      width={1280}
                      height={720}
                      alt={`${title} Hero Image`}
                    />
                  )
                }
              </div>
              <slot />
            </section>
            <aside class="col-span-1 flex flex-col gap-16">
              <div>
                <BlockAuthor />
              </div>
              {tags && tags.length > 0 && <BlockPostTags tags={tags} />}
              <div>
                <a
                  href="/blog"
                  class="flex gap-2 items-center text-violet-500 hover:text-violet-600"
                >
                  <FaArrowLeft /><span>Blog</span>
                </a>
              </div>
            </aside>
          </div>
        </div>
      </article>
    </main>
    <Footer />
  </body>
</html>
